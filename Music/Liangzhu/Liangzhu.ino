int PinBuzzer=6;
int PinButton=2;
int ButtonState=0;
double Gmap[29] = { //G大调
    246.9, 
    261.6, //1
    293.6,
    329.6,
    370.0,
    392.0,
    440.0,
    493.8,
    523.2, //8
    587.2,
    659.2,
    740.0,
    784.0,
    880.0,
    987.6,
    1046.4, //15
    1174.4,
    1318.4,
    1480.0,
    1568.0,
    1760.0,
    1975.2,
    2092.8, //22
    2348.8,
    2636.8,
    2960.0,
    3136.0,
    3520.0,
    3950.4
};

double Gmap_low[8]={
    123.4,
    130.8,
    146.8,
    164.8,
    185.0,
    196.0,
    220.0,
    246.9
};

const int LenOfNotes=239;
;

int NotesVec[LenOfNotes]={
    0,2,3,5,6,3,5,2,7,9,12,10,9,7,9,6,6,6,8,6,4,3,2,3,5,6,   //23
    0,5,3,2,3,5,2,14,16,11,13,10,12,9,9,7,9,7,9,10,11,13,10,9,10,    //26
    12,13,14,16,14,13,14,13,12,10,9,7,12,10,12,10,9,7,9,10,12,9,14,16,13,14,13,12,11,10,    //29
    9,7,9,6,7,6,5,4,3,2,666,11,10,9,6,666,13,11,10,   //32
    9,666,11,10,802,7,10,802,7,6,13,11,10,13,11,10,9,16,1502,    //35
    14,16,13,14,1502,17,14,13,14,16,14,16,17,16,17,18,17,18,20,21,666,     //38
    16,16,19,17,16,14,16,13,14,    //43
    0,2,3,5,6,7,9,10,12,13,    //44
    14,16,11,13,10,12,9,9,7,9,7,9,10,11,13,10,9,10,12,13,14,16,14,13,14,13,12,10,9,   //45
    7,12,10,12,10,9,7,9,10,12,9,666,    //48
    2,2,3,5,6,7,9,6,7,9,10,12,13,14,16,13,14,16,17,19,20,21,23,21,14,21,20,19,12,19,20,17,10,17,19,16,9,16,17,    //52
    
};

double DelayVec[LenOfNotes]={
    4,3,1,3,1,1,1,2,0.25,2.75,1,1,1,1,1,8,2,1,1,0.25,1.75,2,3,1,2,2,    //23
    2,2,1,1,1,1,8,3,1,2,2,1,1,2,4,1.5,0.5,2,1.5,0.5,1,1,6,1,1,    //26
    3,1,0.25,1.75,2,2,1,1,2,1,1,4,4,1.5,0.5,1,1,1,1,1,1,6,1,1,1,1,1,1,2,2,    //29
    6,1,1,1,1,1,1,2,2,8,2,2,2,2,8,2,2,2,2,     //32
    8,2,2,2,2,3,1,2,2,2,4,2,3,1,2,2,2,4,2,    //35
    2,2,2,2,0.25,7.75,4/3,4/3,4/3,4/3,4/3,4/3,4/3,4/3,4/3,4/3,4/3,4/3,12,4,2,     //38
    8,3,1,1,1,1,1,8,8,    //43
    8,1,1,1,1,1,1,1,1,1,    //44
    3,1,2,2,1,1,2,4,1.5,0.5,2,1.5,0.5,1,1,6,1,1,3,1,0.25,1.75,2,2,1,1,2,1,1,    //45
    4,4,1.5,0.5,1,1,1,1,1,1,8,2,    //48
    8,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,8,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,    //52
    
};

int Single_Note=250;

void Notes_Translation(int notes,double multi){
    double duration=Single_Note*multi;
    if(notes<0){
      notes+=7;
      tone(PinBuzzer,Gmap_low[notes]);
      delay(duration);
      pinMode(PinBuzzer,INPUT);
      delay(10);
    }
    else if(notes>=0 && notes<100){    
      tone(PinBuzzer,Gmap[notes]);
      delay(duration);
      pinMode(PinBuzzer,INPUT);
      delay(10);
    }
    else{
      if(notes%100<10){
        double freq=0.0;
        if((notes%100)%2==0) freq=Gmap[notes/100]*1.05946;    //偶数为升调
        else freq=Gmap[notes/100]/1.05946;
        tone(PinBuzzer,freq);
        delay(duration);
        pinMode(PinBuzzer,INPUT);
        delay(10);        
      }
      else{
        pinMode(PinBuzzer,INPUT);
        delay(duration);
        delay(10);
      }

    }
}

void setup() {
  // put your setup code here, to run once:
  pinMode(PinBuzzer,OUTPUT);
  pinMode(PinButton,INPUT);
}

void loop() {
  // put your main code here, to run repeatedly:
  ButtonState = digitalRead(PinButton);
  if(ButtonState == HIGH){
    digitalWrite(PinBuzzer,LOW);
  }
  else{
    digitalWrite(PinBuzzer,HIGH);
    for(int i=0;i!=LenOfNotes;++i)
      Notes_Translation(NotesVec[i],DelayVec[i]);
  }   

}
